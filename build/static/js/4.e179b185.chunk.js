(this["webpackJsonpdancing-fe"]=this["webpackJsonpdancing-fe"]||[]).push([[4],{1952:function(e,t,i){"use strict";i.r(t);var s,a=i(79),n=i(80),o=i(82),r=i(81),m=i(83),h=i(1),c=i.n(h),d=i(539),u=i(139);!function(e){e.kIdle="idle",e.kUp="up",e.kRight="right",e.kWin="win",e.kLose="lose"}(s||(s={}));var l=function(e){function t(e,i,n){var m;return Object(a.a)(this,t),(m=Object(o.a)(this,Object(r.a)(t).call(this,e,i,n,"dancer-idle",0))).setScale(.65*e.cameras.main.width/720),e.anims.create({key:"idle",frames:e.anims.generateFrameNumbers("dancer-idle",{start:0,end:2}),frameRate:6,yoyo:!1,repeat:-1}),e.anims.create({key:"up",frames:e.anims.generateFrameNumbers("dancer-up",{start:0,end:7}),frameRate:12,yoyo:!1,repeat:0}),e.anims.create({key:"right",frames:e.anims.generateFrameNumbers("dancer-right",{start:0,end:7}),frameRate:12,yoyo:!1,repeat:0}),e.anims.create({key:"lose",frames:e.anims.generateFrameNumbers("dancer-lose",{start:0,end:7}),frameRate:10,yoyo:!1,repeat:0}),e.anims.create({key:"win",frames:e.anims.generateFrameNumbers("dancer-win",{start:0,end:7}),frameRate:12,yoyo:!1,repeat:1}),e.anims.create({key:"sulk",frames:e.anims.generateFrameNumbers("dancer-lose",{start:6,end:1}),frameRate:8,yoyo:!1,repeat:-1}),e.add.existing(Object(u.a)(m)),m.anims.load("idle"),m.anims.load("up"),m.anims.load("right"),m.anims.load("lose"),m.anims.load("win"),m.anims.load("sulk"),m.dance(s.kIdle),m}return Object(m.a)(t,e),Object(n.a)(t,[{key:"dance",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.anims.play(e),t&&this.anims.chain("idle")}},{key:"lose",value:function(){this.anims.play("lose"),this.anims.chain("sulk")}}]),t}(d.GameObjects.Sprite),v=function(e){function t(e,i,s,n){var m;return Object(a.a)(this,t),(m=Object(o.a)(this,Object(r.a)(t).call(this,e,i,s-.125*e.cameras.main.height*e.cameras.main.width/720,n,0))).m_move=void 0,m.m_scene=void 0,m.m_scene=e,m.m_move=n,m.setOrigin(.5,.7),e.add.existing(Object(u.a)(m)),m.setScale(e.cameras.main.width/720),m.setInteractive(),m.on("pointerdown",(function(){return m.isPressed()})),m}return Object(m.a)(t,e),Object(n.a)(t,[{key:"isPressed",value:function(){this.m_scene.processMove(this.m_move),this.m_scene.validateMove(this.m_move)}}]),t}(d.GameObjects.Image),_=function(){function e(t,i,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object(a.a)(this,e),this.m_countDownText=["Ready","Set","Go"],this.m_text=void 0,this.m_scene=void 0,this.m_whistleSound=void 0,this.index=0,this.m_scene=t,0!==n.length&&(this.m_countDownText=n),this.m_text=t.add.text(i,s,this.m_countDownText[0],{fontSize:68*t.cameras.main.width/720,color:"white",fontFamily:"Exo"}).setOrigin(.5),this.m_whistleSound=t.sound.add("whistle"),this.m_text.setVisible(!1)}return Object(n.a)(e,[{key:"startCountDown",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.m_text.setVisible(!0),this.index=0,this.m_text.setVisible(!0);for(var s=function(s){t.m_scene.time.addEvent({delay:1e3*i*s,callback:function(){t.index===t.m_countDownText.length?(t.m_text.setVisible(!1),e(),t.index=0):(t.m_whistleSound.play(),t.m_text.setText(t.m_countDownText[s])),t.index++}})},a=0;a<this.m_countDownText.length+1;a++)s(a)}}]),e}(),g=function(e){function t(e,i,n,m,h,c){var d,l;Object(a.a)(this,t),l=h===s.kUp?"#ffa500":"#22A72A",(d=Object(o.a)(this,Object(r.a)(t).call(this,e,i,n,m,{color:l,fontSize:"42px",fontFamily:"Exo"}))).scene.add.existing(Object(u.a)(d)),d.setOrigin(.5),d.setScale(e.cameras.main.width/720);var v=Math.pow(.1,.02/c);return e.time.addEvent({delay:20,loop:!0,callback:function(){d.y-=3*e.cameras.main.width/720,d.setAlpha(d.alpha*v),d.alpha<.1&&d.destroy()}}),d}return Object(m.a)(t,e),t}(d.GameObjects.Text),f=function(){function e(){Object(a.a)(this,e)}return Object(n.a)(e,[{key:"Pulse",value:function(e,t,i,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e.tweens.add({targets:t,scale:s,ease:"Linear",duration:1e3*i,yoyo:!0,repeat:a,delay:1e3*n})}},{key:"Resize",value:function(e,t,i,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.tweens.add({targets:t,scale:s,ease:"Linear",duration:1e3*i,yoyo:!1,repeat:0,delay:1e3*a})}},{key:"Swing",value:function(e,t,i,s,a){var n=this;e.tweens.add({targets:t,angle:s,ease:"Linear",duration:i/2*1e3,yoyo:!0,repeat:0,onComplete:function(){n.Swing(e,t,i,-s,a)}})}},{key:"ChangeAlpha",value:function(e,t,i,s){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e.tweens.add({delay:1e3*n,targets:t,alpha:s,ease:"Linear",duration:1e3*i,yoyo:a,repeat:0})}},{key:"MoveToTarget",value:function(e,t,i,s){e.tweens.add({targets:t,x:s.x,y:s.y,ease:"Linear",duration:1e3*i,yoyo:!1,repeat:0})}},{key:"EaseInAndFade",value:function(e,t,i){this.Resize(e,t,0,.3*e.cameras.main.width/720);var s=.5*i;s>.3&&(s=.5),this.Resize(e,t,s,1.2*e.cameras.main.width/720),this.ChangeAlpha(e,t,i-s,0,!1,.5)}}],[{key:"Instance",get:function(){return this.m_instance||(this.m_instance=new this)}}]),e}();f.m_instance=void 0;var y=function(e){function t(e,i,s,n){var m;return Object(a.a)(this,t),(m=Object(o.a)(this,Object(r.a)(t).call(this,e,i,s,n))).move=void 0,e.add.existing(Object(u.a)(m)),m.move=n,m}return Object(m.a)(t,e),Object(n.a)(t,[{key:"getMove",value:function(){return this.move}}]),t}(d.GameObjects.Image),w=function(e){function t(e,i,s){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(r.a)(t).call(this,e,i,s,"slot"))).graphics=void 0,e.add.existing(Object(u.a)(n)),n.graphics=e.add.graphics({lineStyle:{width:2,color:16711680},fillStyle:{color:16711935}}),n.graphics.setVisible(!1),n}return Object(m.a)(t,e),Object(n.a)(t,[{key:"showMark",value:function(e){this.graphics.clear();var t=new d.Geom.Circle(this.x,this.y,this.displayWidth/2);this.graphics.strokeCircleShape(t),this.graphics.setVisible(e)}},{key:"show",value:function(e){this.setVisible(e)}},{key:"destroyDot",value:function(){this.graphics.clear()}}]),t}(d.GameObjects.Image),p=function(){function e(t,i,s){Object(a.a)(this,e),this.m_memorizeTime=100,this.m_delayBetweenMove=650,this.m_isValidating=!1,this.m_scene=void 0,this.m_currentIndex=0,this.m_currMoveCount=4,this.m_moves=[],this.m_slots=[],this.m_correctSound=void 0,this.m_wrongSound=void 0,this.m_position=void 0,this.m_marginBottom=0,this.m_scene=t,this.m_correctSound=t.sound.add("correct"),this.m_wrongSound=t.sound.add("wrong"),this.m_position=new d.Geom.Point(i,s),this.m_marginBottom=.15*t.cameras.main.height}return Object(n.a)(e,[{key:"isValidating",get:function(){return this.m_isValidating}},{key:"currMoveCount",get:function(){return this.m_currMoveCount},set:function(e){this.m_currMoveCount=e}}]),Object(n.a)(e,[{key:"loadData",value:function(){this.m_memorizeTime=100,this.m_delayBetweenMove=650}},{key:"reset",value:function(){this.m_currentIndex=0,this.createMoveSlots()}},{key:"createMoveSlots",value:function(){this.clearSlots();for(var e=0;e<this.m_currMoveCount;e++){var t=this.m_scene.cameras.main.width,i=new w(this.m_scene,t/(this.m_currMoveCount+1)*(e+1),this.m_position.y-this.m_marginBottom),s=this.currMoveCount<5?5:this.currMoveCount;i.setScale(9.5/s*this.m_scene.cameras.main.width/720),this.m_slots.push(i),i.setVisible(!1)}}},{key:"showMoveSlots",value:function(e){for(var t=0;t<this.m_slots.length;t++)this.m_slots[t].show(e),e||this.m_slots[t].showMark(e)}},{key:"generateMoves",value:function(){this.clearMoves(),this.m_moves=[];for(var e=0;e<this.m_currMoveCount;e++){var t=void 0;t=0===Math.round(Math.random())?s.kUp:s.kRight,this.fillSlot(t,e)}}},{key:"displayMove",value:function(e){this.m_moves[e].setVisible(!0);var t=this.m_moves[e].scale;this.m_moves[e].setScale(t/1.5),f.Instance.Resize(this.m_scene,this.m_moves[e],.1,t),this.m_correctSound.play()}},{key:"validateMove",value:function(e){var t=this,i=!1;if(!0===this.m_isValidating)return i;if(e===this.m_moves[this.m_currentIndex].getMove())this.displayMove(this.m_currentIndex),this.addScore(e),this.m_currentIndex++,i=!0;else{var s=this.m_scene.cameras.main.width,a=this.m_scene.add.image(s/(this.m_currMoveCount+1)*(this.m_currentIndex+1),this.m_position.y-this.m_marginBottom,"x");this.m_slots[this.m_currentIndex].showMark(!0),this.m_scene.wrongMove(),this.m_currentIndex=0,this.m_wrongSound.play(),this.m_scene.time.addEvent({delay:200,callback:function(){t.hideMoves(),a.destroy()}})}return this.m_isValidating=!0,this.m_scene.time.addEvent({delay:150,callback:function(){if(t.m_isValidating=!1,t.m_currentIndex===t.m_currMoveCount){t.m_scene.roundComplete();for(var e=0;e<t.m_currMoveCount;e++){var i=t.m_moves[e].scale;f.Instance.Pulse(t.m_scene,t.m_moves[e],.4,1.1*i,3),f.Instance.Swing(t.m_scene,t.m_moves[e],.4,30,3)}t.m_currentIndex=0}}}),i}},{key:"fillSlot",value:function(e,t){var i=this.m_scene.cameras.main.width,s=new y(this.m_scene,i/(this.m_currMoveCount+1)*(t+1),this.m_position.y-this.m_marginBottom,e),a=this.currMoveCount<5?5:this.currMoveCount;s.setScale(3.5/a*this.m_scene.cameras.main.width/720),s.setVisible(!1),this.m_moves.push(s)}},{key:"displayMoves",value:function(){for(var e=this,t=function(t){e.m_scene.time.addEvent({delay:e.m_delayBetweenMove*(t+1),callback:function(){e.displayMove(t),e.m_scene.processMove(e.m_moves[t].getMove())}})},i=0;i<this.m_moves.length;i++)t(i);this.m_scene.time.addEvent({delay:650*this.m_currMoveCount+this.m_delayBetweenMove+this.m_memorizeTime,callback:function(){e.hideMoves(),e.m_scene.startInputPhase()}})}},{key:"hideMoves",value:function(){for(var e=0;e<this.m_moves.length;e++)this.m_moves[e].setVisible(!1)}},{key:"clearMoves",value:function(){for(var e=0;e<this.m_moves.length;e++)this.m_moves[e].destroy();this.m_moves=[]}},{key:"clearSlots",value:function(){for(var e=0;e<this.m_slots.length;e++)this.m_slots[e].destroyDot(),this.m_slots[e].destroy();this.m_slots=[]}},{key:"addScore",value:function(e){var t=this.m_scene.cameras.main.width;new g(this.m_scene,t/(this.m_currMoveCount+1)*(this.m_currentIndex+1),this.m_position.y-this.m_marginBottom-50*this.m_scene.cameras.main.width/720,"+100",e,.5)}}]),e}(),b=function(e){function t(e,i,s){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(r.a)(t).call(this,e,i,s,"scoreBg"))).m_text=void 0,n.m_score=0,n.scene.add.existing(Object(u.a)(n)),n.m_text=e.add.text(i+50*e.cameras.main.width/720,s,"0",{fontSize:40,color:"white",fontFamily:"Exo"}),n.m_text.setOrigin(0,.5),n.setScale(e.cameras.main.width/720),n.m_text.setScale(e.cameras.main.width/720),n}return Object(m.a)(t,e),Object(n.a)(t,[{key:"reset",value:function(){this.m_score=0,this.m_text.setText(this.m_score.toString())}},{key:"setScore",value:function(e){this.m_score=e,this.m_text.setText(this.m_score.toString())}}]),t}(d.GameObjects.Image),O=function(e){function t(e,i,s){var n;Object(a.a)(this,t),(n=Object(o.a)(this,Object(r.a)(t).call(this,e,i,s,"music"))).m_text=void 0,n.m_isOn=!0,e.add.existing(Object(u.a)(n)),n.setOrigin(.5,.5),n.setScale(e.cameras.main.width/720),n.m_text=e.add.text(i-75*e.cameras.main.width/720,s,"ON",{fontSize:40,color:"white",fontFamily:"Exo"}).setOrigin(.5),n.m_text.setScale(e.cameras.main.width/720);var m=e.add.rectangle(i-25,s,175,100,16777215,0);return m.setInteractive(),m.on("pointerdown",(function(){return n.setSound()})),n}return Object(m.a)(t,e),Object(n.a)(t,[{key:"setSound",value:function(){this.m_isOn=!this.m_isOn,this.scene.sound.mute=!this.m_isOn,this.m_isOn?this.m_text.setText("ON"):this.m_text.setText("OFF")}}]),t}(d.GameObjects.Image),k=function(){function e(t,i,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;Object(a.a)(this,e),this.m_duration=void 0,this.m_currentTime=void 0,this.m_timer=void 0,this.m_milliseconds=void 0,this.m_seconds=void 0,this.m_hasStarted=!1,this.m_scene=void 0,this.m_duration=n,this.m_currentTime=n,this.m_scene=t,this.m_seconds=t.add.text(i-.03*t.cameras.main.width,s,n.toString().substr(0,2),{fontSize:60,fontFamily:"Exo"}).setOrigin(.5,0).setScale(t.cameras.main.width/720),this.m_milliseconds=t.add.text(i+.06*t.cameras.main.width,s+5*t.cameras.main.width/720,n.toString(),{fontSize:30,fontFamily:"Exo"}).setOrigin(.5,0).setScale(t.cameras.main.width/720),this.setMilliseconds(n+.001)}return Object(n.a)(e,[{key:"playTimer",value:function(e,t){void 0===this.m_timer&&(this.m_timer=e.time.delayedCall(1e3*this.m_duration,t,[],e)),this.m_hasStarted=!0}},{key:"pause",value:function(e){void 0!==this.m_timer&&(this.m_timer.paused=e)}},{key:"tick",value:function(){if(this.m_hasStarted&&void 0!==this.m_timer){var e=this.m_duration-this.m_timer.getProgress()*this.m_duration;this.setSeconds(e),this.setMilliseconds(e)}}},{key:"reset",value:function(){this.setSeconds(this.m_duration),this.setMilliseconds(this.m_duration+.001),this.m_hasStarted=!1,void 0!==this.m_timer&&(this.m_timer.destroy(),this.m_timer=void 0)}},{key:"setSeconds",value:function(e){var t=e.toString();e<10&&(t="0"+t),e<0&&(t="00"+t),this.m_seconds.setText(t.toString().substr(0,2))}},{key:"setMilliseconds",value:function(e){var t=e.toString();e<10&&(t="0"+t),e<0&&(t="00"+t),t=t.toString().substr(3,5),0===e&&(t="00"),this.m_milliseconds.setText(t.toString().substr(0,2))}}]),e}(),S=function(e){function t(e,i,s,n,m){var h;Object(a.a)(this,t);var c=[],l=e.add.graphics();l.fillStyle(6584732,1),l.fillRoundedRect(-320,-215,640,430,32),l.fillStyle(7780067,1);var v=l.fillRoundedRect(-120,-265,240,70,12);c.push(l);var _=new d.GameObjects.Text(e,0,v.y+25-230+3,"ROUND "+n.toString(),{color:"black",fontSize:"40px",fontFamily:"Exo"}).setOrigin(.5,1);_.setStroke("black",3);var g=new d.GameObjects.Text(e,0,v.y+25-230,"ROUND "+n.toString(),{color:"white",fontSize:"40px",fontFamily:"Exo"}).setOrigin(.5,1);g.setStroke("white",3),c.push(_),c.push(g);var f=new d.GameObjects.Text(e,0,-120,"YOU GET",{color:"white",fontSize:"30px",fontFamily:"Exo"}).setOrigin(.5,1);c.push(f);var y=new d.GameObjects.Image(e,0,-30,"scoreBg");y.setScale(2),c.push(y);var w=new d.GameObjects.Text(e,0,120,m.toString(),{color:"#fcba03",fontSize:"55px",fontFamily:"Exo"}).setOrigin(.5,1);w.setStroke("#fcba03",4),c.push(w);var p=new d.GameObjects.Text(e,0,170,"Points",{color:"#fcba03",fontSize:"30px",fontFamily:"Exo"}).setOrigin(.5,1);return c.push(p),(h=Object(o.a)(this,Object(r.a)(t).call(this,e,i,s+25,c))).m_roundText=void 0,h.m_pointText=void 0,h.m_shadow=void 0,e.add.existing(Object(u.a)(h)),h.m_pointText=w,h.m_roundText=g,h.m_shadow=_,h.setDepth(1),h}return Object(m.a)(t,e),Object(n.a)(t,[{key:"show",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.m_pointText.setText((t+i).toString()),this.setScale(.4*this.scale*this.scene.cameras.main.width/720),this.m_roundText.setText("ROUND "+e.toString()),this.m_shadow.setText("ROUND "+e.toString()),this.setVisible(!0),f.Instance.Resize(this.scene,this,.2,1*this.scene.cameras.main.width/720)}},{key:"hide",value:function(){this.setVisible(!1)}}]),t}(d.GameObjects.Container),x=function(){function e(t){var i=this;Object(a.a)(this,e),this.gameOverContainer=void 0;var s=[],n=t.add.image(0,50,"replay");t.add.existing(n),n.setInteractive(),s.push(n);var o=t.add.text(0,-200,"GAME OVER",{fontSize:60,fontFamily:"Exo"}).setOrigin(.5);n.setScale(.7),n.on("pointerover",(function(){n.setScale(.9)})),n.on("pointerdown",(function(){n.setScale(.7),t.reset(),i.setVisible(!1)})),n.on("pointerout",(function(){n.setScale(.7)})),s.push(o),this.gameOverContainer=new Phaser.GameObjects.Container(t,t.cameras.main.width/2,t.cameras.main.height/2-100,s),t.add.existing(this.gameOverContainer),this.gameOverContainer.setDepth(2),this.gameOverContainer.setScale(t.cameras.main.width/720)}return Object(n.a)(e,[{key:"setVisible",value:function(e){this.gameOverContainer.setVisible(e)}}]),e}(),M=function(){function e(){Object(a.a)(this,e),this.m_text=void 0}return Object(n.a)(e,[{key:"showText",value:function(e,t,i,s,a,n,o){var r=this,m=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return void 0!==this.m_text&&this.m_text.destroy(),this.m_text=e.add.text(t,i,a,{color:n,fontSize:s.toString()+"px",fontFamily:"Exo"}),this.m_text.setOrigin(.5),this.m_text.setScale(e.cameras.main.width/720),m&&(this.m_text.setStroke("#ffffff",4),this.m_text.setShadowStroke(!0),this.m_text.setShadow(0,5,"#346eeb")),e.time.addEvent({delay:1e3*o,callback:function(){void 0!==r.m_text&&r.m_text.setVisible(!1)}}),this.m_text}}],[{key:"Instance",get:function(){return this.m_instance||(this.m_instance=new this)}}]),e}();M.m_instance=void 0;var j=[4,5,6,7,8,9,10],I=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(o.a)(this,Object(r.a)(t).call(this,{key:"GameScene"}))).m_score=0,e.m_correctScore=100,e.m_wrongPenalty=100,e.m_firstTryBonus=75,e.m_moveCounts=[],e.m_isFirstTry=!0,e.m_showInstruction=!0,e.m_moveManager=void 0,e.m_dancer=void 0,e.m_currentRound=1,e.m_upButton=void 0,e.m_rightButton=void 0,e.m_countDown=void 0,e.m_scoreUI=void 0,e.m_roundSummary=void 0,e.m_timer=void 0,e.m_tint=void 0,e.m_bgm=void 0,e.m_winSound=void 0,e.m_gameOverUI=void 0,e.m_musicButton=void 0,e.reset=function(){e.m_tint.setVisible(!1),e.m_currentRound=1,e.m_score=0,e.m_scoreUI.reset(),e.processMove(s.kIdle),e.m_timer.reset(),e.setMoveCount(),e.m_moveManager.reset(),e.startCountDownPhase()},e.startMemorizePhase=function(){e.m_showInstruction&&M.Instance.showText(Object(u.a)(e),e.cameras.main.width/2,e.cameras.main.height/2+.08*e.cameras.main.height,24,"Follow the pattern to get points","white",3,!1),e.m_showInstruction=!1,e.m_isFirstTry=!0,e.m_moveManager.showMoveSlots(!0),e.m_moveManager.displayMoves()},e}return Object(m.a)(t,e),Object(n.a)(t,[{key:"Score",get:function(){return this.m_score},set:function(e){this.m_score=e,this.m_score<0&&(this.m_score=0)}}]),Object(n.a)(t,[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"background");e.displayWidth=this.cameras.main.width,e.displayHeight=this.cameras.main.height,this.m_dancer=new l(this,this.cameras.main.width/2,this.cameras.main.height/2-.1*this.cameras.main.height),this.m_upButton=new v(this,this.cameras.main.width/2-.2*this.cameras.main.width,this.cameras.main.height,s.kUp),this.m_rightButton=new v(this,this.cameras.main.width/2+.2*this.cameras.main.width,this.cameras.main.height,s.kRight),this.m_moveManager=new p(this,this.cameras.main.width/2,this.m_rightButton.y-.05*this.cameras.main.height),this.m_countDown=new _(this,this.cameras.main.width/2,this.cameras.main.height/2+120*this.cameras.main.width/720),this.m_scoreUI=new b(this,75,75),this.m_musicButton=new O(this,this.cameras.main.width-75,75),this.m_roundSummary=new S(this,this.cameras.main.width/2,this.cameras.main.height/2-50*this.cameras.main.width/720,this.m_currentRound,this.m_score),this.m_roundSummary.hide(),this.m_timer=new k(this,this.cameras.main.width/2,0+.16*this.cameras.main.height,20),this.m_tint=this.add.rectangle(0,0,this.cameras.main.width,this.cameras.main.height,0,.45),this.m_tint.setOrigin(0,0),this.m_tint.setVisible(!1);this.m_bgm=this.sound.add("disco",{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!0,delay:0}),this.m_winSound=this.sound.add("yay"),this.m_bgm.play(),this.m_gameOverUI=new x(this),this.m_gameOverUI.setVisible(!1),this.loadData(),this.initGame()}},{key:"loadData",value:function(){this.m_correctScore=100,this.m_wrongPenalty=100,this.m_firstTryBonus=75,this.m_moveCounts=j,this.m_moveManager.loadData()}},{key:"initGame",value:function(){var e=this;this.setMoveCount();var t=M.Instance.showText(this,this.cameras.main.width/2,this.m_dancer.y,60,"ROUND "+this.m_currentRound.toString(),"white",1);this.m_tint.setVisible(!0),f.Instance.EaseInAndFade(this,t,1),this.time.addEvent({delay:1e3,callback:function(){e.startCountDownPhase(),e.m_tint.setVisible(!1)}})}},{key:"setMoveCount",value:function(){this.m_currentRound<this.m_moveCounts.length&&(this.m_moveManager.currMoveCount=this.m_moveCounts[this.m_currentRound-1]),this.m_moveManager.createMoveSlots()}},{key:"update",value:function(){this.m_timer.tick()}},{key:"roundComplete",value:function(){var e=this;this.enableButton(!1),this.m_timer.pause(!0),this.time.addEvent({delay:250,callback:function(){e.processMove(s.kWin);var t=M.Instance.showText(e,e.cameras.main.width/2,e.cameras.main.height/2+80,64,"AWESOME!","white",1.5);f.Instance.Pulse(e,t,.4,1.3*t.scale,3),e.m_winSound.play()}});var t=this.m_moveManager.currMoveCount*this.m_correctScore,i=0;this.m_isFirstTry&&(i=this.m_firstTryBonus),this.Score+=t+i,this.time.addEvent({delay:1500,callback:function(){e.m_scoreUI.setScore(e.Score),e.m_roundSummary.show(e.m_currentRound,t,i),e.m_tint.setVisible(!0)}}),this.time.addEvent({delay:3500,callback:function(){e.m_currentRound++,e.m_moveManager.showMoveSlots(!1),e.m_roundSummary.hide(),e.m_tint.setVisible(!1),e.m_timer.reset(),e.setMoveCount(),e.m_moveManager.generateMoves(),e.startMemorizePhase()}})}},{key:"wrongMove",value:function(){var e=this;this.enableButton(!1),this.m_isFirstTry=!1,this.Score-=this.m_wrongPenalty,this.m_scoreUI.setScore(this.Score),this.time.addEvent({delay:200,callback:function(){M.Instance.showText(e,e.cameras.main.width/2,e.cameras.main.height/2+80,60,"TRY AGAIN","white",1)}}),this.time.addEvent({delay:1e3,callback:function(){e.startInputPhase()}})}},{key:"startCountDownPhase",value:function(){var e=this;this.enableButton(!1),this.m_moveManager.showMoveSlots(!1),this.m_moveManager.generateMoves(),this.m_roundSummary.hide(),this.time.addEvent({delay:500,callback:function(){e.m_countDown.startCountDown(e.startMemorizePhase)}})}},{key:"startInputPhase",value:function(){this.enableButton(!0),this.m_timer.playTimer(this,this.gameOver)}},{key:"enableButton",value:function(e){e?(this.m_rightButton.setInteractive(),this.m_rightButton.setAlpha(1),this.m_upButton.setInteractive(),this.m_upButton.setAlpha(1)):(this.m_rightButton.disableInteractive(),this.m_rightButton.setAlpha(.5),this.m_upButton.disableInteractive(),this.m_upButton.setAlpha(.5))}},{key:"validateMove",value:function(e){this.m_moveManager.validateMove(e)}},{key:"processMove",value:function(e){this.m_moveManager.isValidating||this.m_dancer.dance(e)}},{key:"gameOver",value:function(){var e=this;this.m_dancer.lose(),this.enableButton(!1);var t=M.Instance.showText(this,this.cameras.main.width/2,this.m_dancer.y,60,"TIME'S UP","white",1.5);f.Instance.EaseInAndFade(this,t,1.5),this.m_tint.setVisible(!0),this.time.addEvent({delay:1e3,callback:function(){e.m_gameOverUI.setVisible(!0)}})}}]),t}(d.Scene),T=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(o.a)(this,Object(r.a)(t).call(this,{key:"PreloadScene"}))).useProgress=void 0,e}return Object(m.a)(t,e),Object(n.a)(t,[{key:"init",value:function(e){this.useProgress=e.useProgress}},{key:"preload",value:function(){this.load.path="".concat("/dancing","/Assets/"),this.load.image("shopee","shopee.png"),this.load.spritesheet("dancer-idle","choki-standby.png",{frameWidth:450,frameHeight:450}),this.load.spritesheet("dancer-up","choki-up.png",{frameWidth:450,frameHeight:450}),this.load.spritesheet("dancer-right","choki-right.png",{frameWidth:450,frameHeight:450}),this.load.spritesheet("dancer-win","choki-win.png",{frameWidth:450,frameHeight:450}),this.load.spritesheet("dancer-lose","choki-lose.png",{frameWidth:450,frameHeight:450}),this.load.image("right","RightButton.png"),this.load.image("music","Music.png"),this.load.image("x","x.png"),this.load.image("replay","Replay.png"),this.load.image("up","UpButton.png"),this.load.image("slot","EmptyButton.png"),this.load.image("background","MainBackground.png"),this.load.image("scoreBg","Points.png"),this.load.audio("whistle","whistle.wav"),this.load.audio("correct","correct.wav"),this.load.audio("wrong","wrong.wav"),this.load.audio("disco","disco.mp3"),this.load.audio("yay","yay.wav"),this.load.on("progress",this.updateBar,{useProgress:this.useProgress}),this.load.on("complete",this.complete,{scene:this.scene})}},{key:"create",value:function(){this.add.text(0,0,"hack",{font:"Exo",fill:"#FFFFFF"})}},{key:"updateBar",value:function(e){if(this.useProgress){var t=(100-this.useProgress.limit)*e;this.useProgress.setProgress(this.useProgress.limit+Math.floor(t))}}},{key:"complete",value:function(){this.scene.start("GameScene")}}]),t}(d.Scene),C={title:"PhaserGame",scale:{parent:"game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:window.devicePixelRatio*window.innerWidth,height:window.devicePixelRatio*window.innerHeight-130},physics:{default:"arcade",arcade:{debug:!0}},backgroundColor:"#493a52"},P=function(e){function t(e){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(r.a)(t).call(this,s))).scene.add("PreloadScene",T,!0,{useProgress:e}),i.scene.add("GameScene",I),i}return Object(m.a)(t,e),t}(Phaser.Game);i.d(t,"default",(function(){return B}));var B=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.useProgress,t=e.isReadyToLoad,i=e.hasFontLoaded;t&&i&&new P(this.props.useProgress)}},{key:"componentDidUpdate",value:function(e){var t=this.props.useProgress,i=t.isReadyToLoad,s=t.hasFontLoaded;e.useProgress.isReadyToLoad!==i&&s&&new P(this.props.useProgress)}},{key:"render",value:function(){return c.a.createElement("div",{id:"game"})}}]),t}(c.a.PureComponent)}}]);
//# sourceMappingURL=4.e179b185.chunk.js.map